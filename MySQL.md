MySQL：中小型的开源免费数据库

# 基础篇

### SQL语言

总述：

**DDL**(Data Definition Language)：数据定义语言，用来定义数据库对象（数据库、表、字段）

**DML**(Data Manipulation Language)：数据操作语言，用来对数据库中的数据进行增删改

**DQL**(Data Query Language)：数据查询语言，用来查询数据库中表的记录

**DCL**(Data Control Language)：数据控制语言，用来创建数据库用户、控制数据库的访问权限

#### SQL-DDL

##### DDL-数据库操作

DDL：数据定义语言（不区分大小写）

1. 查询所有数据库

   ```sql
   show databases;
   ```

2. 查询当前数据库

   ```sql
   select database();
   ```

3. 创建

   ```sql
   create database[if not exists]数据库名[default charset 字符集][collate 排序规则]
   如果需要设置字符集则建议使用utf8mb4,如下
   create database if not exists xxx default charset utf8mb4;
   ```

4. 删除

   ```sql
   drop database[if exists]数据库名;
   使用示例：
   drop database if exists xxx;
   ```

5. 使用

   ```sql
   use 数据库名;
   ```

6. xxx

##### DDL-表操作-查询

1. 查询当前数据库所有表

   ```sql
   show tables;
   ```

2. 查询表结构

   ```sql
   desc xxx(表名);
   ```

   

3. 查询指定表的建表语句（即查看表创建的详细信息）

   ```sql
   show create table 表名
   
   示例：
   mysql> show create table tb_user;
   +---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Table   | Create Table
   
                                                                 |
   +---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tb_user | CREATE TABLE `tb_user` (
     `id` int DEFAULT NULL COMMENT '编号',
     `name` varchar(50) DEFAULT NULL COMMENT '名字',
     `age` int DEFAULT NULL COMMENT '年龄',
     `gender` varchar(1) DEFAULT NULL COMMENT '性别'
   ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='用户表' |
   +---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   1 row in set (0.00 sec)
   
   说明：
   ENGINE：存储引擎
   CHARSET：字符集，默认utf8mb4
   COLLATE：排序规则
   ```

   

4. xxx

##### DDL-表操作-创建

```sql
create table 表名(
    字段1 字段1数据类型 comment 字段1注释,
    字段2 字段2数据类型 comment 字段2注释,
    ……
    字段n 字段n数据类型 comment 字段n注释
) comment 表注释;
```



##### DDL-表操作-数据类型

MySQL中数据类型众多，主要分为三类：数值类型、字符串类型、日期时间类型。

详细见下表：

|   分类   |         类型         | （大小）byte | 有符号（SIGNED）范围             | 无符号（UNSIGNED）范围           | 描述                 |
| :------: | :------------------: | ------------ | -------------------------------- | -------------------------------- | -------------------- |
| 数值类型 |   TINYINT(tinyint)   | 1            |                                  |                                  | 整数型               |
| 数值类型 |  SMALLINT(smallint)  | 2            |                                  |                                  | 整数型               |
| 数值类型 | MEDIUMINT(mediumint) | 3            |                                  |                                  | 整数型               |
| 数值类型 |    INT or INTEGER    | 4            |                                  |                                  | 整数型               |
| 数值类型 |    BIGINT(bigint)    | 8            |                                  |                                  | 整数型               |
| 数值类型 |        FlOAT         | 4            |                                  |                                  | 单精度浮点数         |
| 数值类型 |        DOUBLE        | 8            |                                  |                                  | 双精度浮点念书       |
| 数值类型 |  DECIMAL（decimal）  |              | 依赖于M（精度）和D（表单独）的值 | 依赖于M（精度）和D（表单独）的值 | 小数值（精确定点数） |
| 数值类型 |                      |              |                                  |                                  |                      |

示例：

score double（4，1）——四位数，一位小数

|    分类    |        类型        |  大小（bytes）  |             描述              |
| :--------: | :----------------: | :-------------: | :---------------------------: |
| 字符串类型 |     CHAR(char)     |      0-255      |          定长字符串           |
| 字符串类型 |  VARCHAR(varchar)  |     0-65535     |          变长字符串           |
| 字符串类型 | TINYBLOB(tinyblob) |      0-255      | 不超过255个字符的二进制字符串 |
| 字符串类型 | TINYTEXT(tinytext) |      0-255      |         短文本字符串          |
| 字符串类型 |        BLOB        |    0-65 535     |    二进制形式的长文本数据     |
| 字符串类型 |        TEXT        |    0-65 535     |         长文本字符串          |
| 字符串类型 |     MEDIUMBLOB     |  0-16 777 215   |           中等长度            |
| 字符串类型 |     MEDIUMTEXT     |  0-16 777 215   |           中等长度            |
| 字符串类型 |      LONGBLOB      | 0-4 294 967 295 |             极大              |
| 字符串类型 |      LONGTEXT      | 0-4 294 967 295 |             极大              |

char（num）--性能好

varchar（num）--性能差

|   分类   |   类型    | 大小 |                      范围                      |       格式        |       描述       |
| :------: | :-------: | :--: | :--------------------------------------------: | :---------------: | :--------------: |
| 日期时间 |   DATE    |  3   |            1000-01-01 至 9999-12-31            |  year-month-day   |       日期       |
| 日期时间 |   TIME    |  3   |          -838：59：59 至 838：59：59           | hour：min：second |  时间或持续时间  |
| 日期时间 |   YEAR    |  1   |                  1901 至 2155                  |       year        |       年份       |
| 日期时间 | DATETIME  |  8   | 1000-01-01 00：00：00 至 9999-12-31 23：59：59 |    y-m-d h:m:s    | 混合日期或时间值 |
| 日期时间 | TIMESTAMP |  4   | 1970-01-01 00：00：01 至 2038-01-19 03：14：07 |    y-m-d h:m:s    |      时间戳      |

示例：

```sql
create table employee(
    id int comment '编号',
    work_number varchar(10) comment '工号',
    name varchar(10) comment '姓名',
    age tinyint unsigned comment '年龄',
    idcard char(18) comment'身份证号',
    entrydate date comment '入职时间'
    ) comment '员工表';
```

##### 

##### DDL-表操作-修改

1. 添加字段

   ```sql
   ALTER TABLE 表名 ADD 字段名 类型（长度） comment 注释[约束]
   ```

2. 修改数据类型

   ```sql
   ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);
   ```

   

3. 修改字段名和字段类型

   ```sql
   ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型（长度） comment 注释 [约束];
   ```

4. 删除字段

   ```sql
   ALTER TABLE 表名 DROP 字段名;
   ```

5. 修改表名

   ```sql
   ALTER TABLE 表名 RENAME TO 新表名;
   ```

   

6. xxx



##### DDL-表操作-删除

1. 删除表

   ```sql
   DROP TABLE [if exists ]表名; 
   ```

   

2. 删除指定表，并重新创建该表

   ```sql
   TRUNCATE TABLE 表名；
   ps：保留原表结构
   ```

   

3. xxx

#### SQL-DML

##### DML-介绍

- 插入（添加）数据--INSERT
- 更新（修改）数据--UPDATE
- 删除数据--DELETE

##### DML-插入数据

1. 给指定字段添加数据（插入数据）

   ```sql
   INSERT INTO 表名（字段名1，字段名2，...） value （值1，值2,...）;
   ```

   

2. 给全部字段添加数据（插入数据）

   ```sql
   INSERT INTO 表名 value（值1，值2，...）;
   ```

   

3. 批量插入数据

   ```sql
   INSERT INTO 表名（字段名1，字段名2，...） value （值1，值2,...）,（值1，值2,...）,...（值1，值2,...）;
   INSERT INTO value （值1，值2,...）,（值1，值2,...）,...（值1，值2,...）;
   ```

   ##### 

**注意**：

- 插入数据时，指定的字段顺序需要与值得顺序是一一对应得
- 字符串和日期类型的数据应该包含在引号中
- 插入的数据大小应当在字段的指定范围内

##### DML-修改数据

```sql
UPDATE 表名 SET 字段名1=值1，字段名2=值2，....[WHERE 条件];
```

注意：修改语句的条件可以没有，但是如果没有条件，则会对整张表的所有数据进行修改;

##### DML-删除数据

```sql
DELETE FROM 表名 [WHERE 条件];
```

**注意**：

- DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据
- DELETE语句不能删除某一个字段的值（可以使用UPDATE）

#### SQL-DQL

##### DQL-介绍

查询关键字--SELECT

##### DQL-语法结构

|  关键字  | 关键字后对应查询的对象类型 |
| :------: | :------------------------: |
|  SELECT  |          字段列表          |
|   FROM   |           表列表           |
|  WHERE   | 条件列表（可以有多个条件） |
| GROUP BY |        分组字段列表        |
|  HAVING  |       分组后条件列表       |
| ORDER BY |        排序字段列表        |
|  LIMIT   |          分页参数          |

- 基本查询
- 条件查询（WHERE）
- 聚合函数（count、max、min、avg、sum）
- 分组查询（GOUNP BY）
- 排序查询（ORDER BY）
- 分页查询（LIMIT）

##### DQL-基本查询

1. 查询多个字段

   ```sql
   SELECT 字段1，字段2，... FROM 表名;
   SELECT * FROM 表名;
   -- 但是最好不要使用 * 的语句
   -- 弊端：
   --      1.不直观
   --  	2.执行效率低
   ```

   

2. 设置别名

   ```sql
   SELECT 字段1[AS 别名1],字段2[AS 别名2],... FROM 表名;
   ```

   

3. 去除重复记录

   ```sql
   SELECT DISTINCT 字段列表 FROM 表名;
   ```

   

4. xxx

##### DQL-条件查询

语法：

```sql
SELECT 字段 FROM 表名 WHERE 条件列表;
```

条件：

|     比较运算符      |                    功能描述                    |
| :-----------------: | :--------------------------------------------: |
|          >          |                      大于                      |
|         >=          |                    大于等于                    |
|          <          |                      小于                      |
|         <=          |                    小于等于                    |
|          =          |                      等于                      |
|      <> 或 !=       |                     不等于                     |
| BETWEEN ... AND ... |         在某个范围之内(含最小、最大值)         |
|       IN(...)       | 在 in 之后的列表的值(即确定搜索范围，类似枚举) |
|     LIKE 占位符     |    模糊匹配（_代表一个字符，%匹配任意字符）    |
|       IS NULL       |                     是NULL                     |



| 逻辑运算符 | 功能描述 |
| :--------: | :------: |
| AND 或 &&  |   并且   |
| OR 或 \|\| |    或    |
|  NOT 或 !  |    非    |



##### DQL-聚合函数

注意：聚合函数作用域表中的每一个字段列表；

​			并且null不参与聚合函数的所有运算；

| 函数名 |   功能   |
| :----: | :------: |
| count  | 统计数量 |
|  max   |  最大值  |
|  min   |  最小值  |
|  avg   |  平均值  |
|  sum   |   求和   |

语法：

```sql
SELECT 函数名（字段列表） FROM 表名 [/*可在后面接运算条件*/ where + 条件];
```



##### DQL-分组查询

##### DQL-排序查询

##### DQL-分页查询

#### SQL-DCL

##### DCL

#### MySQL图形化界面

主要界面：Sqlyog、Navicat、DataGrip（选择使用此款图形化界面）



